# multitasking
多任务抓取数据（协程、线程、进程、分布式）

最近在写分布式爬虫的项目，搜到你的这个项目，
请教你有没有考虑2台以上服务端同时运行，客户端的代码怎样写？
我有3台云服务器。

实现这样的效果：
我本机发送url任务给3台云服务器，然后服务器去请求网页，
把requests.get()返回的response对象发送回本机，在本机处理解析之类的后续工作。

重点是：
云端如果有1-2台挂掉了，不会影响本地程序，当然3台都挂了，客户端就报错退出。
云端的效果可以写成死循环永远等待任何客户端发来的url任务。

————————————————————————————————————————————————————————————————————————————
我也在学习，我问了别人，说可以用消息队列解决
他们用的rocket mq
我不知道怎么发图片，他给我画的图片很清晰
如果不想用mq，直接放到数据库里也行，
本地把url保存到数据库，服务器去数据库取，，把requests.get()处理的结果放到数据库，，客户端再去数据库取。。
如果用数据库就需要处理（判断url有没有被别的服务器用过了）这个问题，，要是用rocket mq就不需要，，（云端如果有1-2台挂掉了，不会影响本地程序，当然3台都挂了，客户端就报错退出。）这个问题也就解决了。。。可以查查python的rocket mq这个东西
————————————————————————————————————————————————————————————————————————————
rocket mq大约看了一眼，感觉稍微有些复杂，有空再研究研究。
折腾了好久，我最终用了一种Python标准库中的rpc调用方法，感觉也不算真正意义上的分布式，不过可以用，效率和错误处理上还没有处理，你看看是否有改进意见。

